const Produce = [
  {
    label: 'Blue Jazz',
    days_to_grow: 7,
    regrowth_time: -1,
    selling_price: 50,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 30,
    joja: 37,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: true,
    summer: false,
    fall: false,
    winter: false
  },
  {
    label: 'Cauliflower',
    days_to_grow: 12,
    regrowth_time: -1,
    selling_price: 175,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 80,
    joja: 100,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: true,
    summer: false,
    fall: false,
    winter: false
  },
  {
    label: 'Garlic',
    days_to_grow: 4,
    regrowth_time: -1,
    selling_price: 60,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 40,
    joja: Infinity,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: true,
    summer: false,
    fall: false,
    winter: false
  },
  {
    label: 'Kale',
    days_to_grow: 6,
    regrowth_time: -1,
    selling_price: 110,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 70,
    joja: 87,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: true,
    summer: false,
    fall: false,
    winter: false
  },
  {
    label: 'Parsnip',
    days_to_grow: 4,
    regrowth_time: -1,
    selling_price: 35,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 20,
    joja: 25,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: true,
    summer: false,
    fall: false,
    winter: false
  },
  {
    label: 'Potato',
    days_to_grow: 6,
    regrowth_time: -1,
    selling_price: 80,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 50,
    joja: 62,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: true,
    summer: false,
    fall: false,
    winter: false
  },
  {
    label: 'Rhubarb',
    days_to_grow: 13,
    regrowth_time: -1,
    selling_price: 220,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: Infinity,
    joja: Infinity,
    egg_festival: Infinity,
    oasis: 100,
    travelling_cart: Infinity,
    spring: true,
    summer: false,
    fall: false,
    winter: false
  },
  {
    label: 'Tulip',
    days_to_grow: 6,
    regrowth_time: -1,
    selling_price: 30,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 20,
    joja: 25,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: true,
    summer: false,
    fall: false,
    winter: false
  },
  {
    label: 'Coffee Bean',
    days_to_grow: 10,
    regrowth_time: 2,
    selling_price: 15,
    yield_per_harvest: 4,
    multiple_harvests: true,
    pierre: Infinity,
    joja: Infinity,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: 2500,
    spring: true,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Green Bean',
    days_to_grow: 10,
    regrowth_time: 3,
    selling_price: 40,
    yield_per_harvest: 1,
    multiple_harvests: true,
    pierre: 60,
    joja: 75,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: true,
    summer: false,
    fall: false,
    winter: false
  },
  {
    label: 'Strawberry',
    days_to_grow: 8,
    regrowth_time: 4,
    selling_price: 120,
    yield_per_harvest: 1,
    multiple_harvests: true,
    pierre: Infinity,
    joja: Infinity,
    egg_festival: 100,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: true,
    summer: false,
    fall: false,
    winter: false
  },
  {
    label: 'Melon',
    days_to_grow: 12,
    regrowth_time: -1,
    selling_price: 250,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 80,
    joja: 100,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Poppy',
    days_to_grow: 7,
    regrowth_time: -1,
    selling_price: 140,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 100,
    joja: 125,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Radish',
    days_to_grow: 6,
    regrowth_time: -1,
    selling_price: 90,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 40,
    joja: 50,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Red Cabbage',
    days_to_grow: 9,
    regrowth_time: -1,
    selling_price: 260,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 100,
    joja: Infinity,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Starfruit',
    days_to_grow: 13,
    regrowth_time: -1,
    selling_price: 750,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: Infinity,
    joja: Infinity,
    egg_festival: Infinity,
    oasis: 400,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Summer Spangle',
    days_to_grow: 8,
    regrowth_time: -1,
    selling_price: 90,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 50,
    joja: 62,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Sunflower',
    days_to_grow: 8,
    regrowth_time: -1,
    selling_price: 80,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 200,
    joja: 125,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: true,
    winter: false
  },
  {
    label: 'Wheat',
    days_to_grow: 4,
    regrowth_time: -1,
    selling_price: 25,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 10,
    joja: 12,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: true,
    winter: false
  },
  {
    label: 'Blueberry',
    days_to_grow: 13,
    regrowth_time: 4,
    selling_price: 50,
    yield_per_harvest: 3,
    multiple_harvests: true,
    pierre: 80,
    joja: Infinity,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Corn',
    days_to_grow: 14,
    regrowth_time: 4,
    selling_price: 150,
    yield_per_harvest: 1,
    multiple_harvests: true,
    pierre: 150,
    joja: 187,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: true,
    winter: false
  },
  {
    label: 'Hops',
    days_to_grow: 11,
    regrowth_time: 1,
    selling_price: 25,
    yield_per_harvest: 1,
    multiple_harvests: true,
    pierre: 60,
    joja: 75,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Hot Pepper',
    days_to_grow: 5,
    regrowth_time: 3,
    selling_price: 40,
    yield_per_harvest: 1,
    multiple_harvests: true,
    pierre: 40,
    joja: 50,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Tomato',
    days_to_grow: 11,
    regrowth_time: 4,
    selling_price: 60,
    yield_per_harvest: 1,
    multiple_harvests: true,
    pierre: 50,
    joja: 62,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: true,
    fall: false,
    winter: false
  },
  {
    label: 'Amaranth',
    days_to_grow: 7,
    regrowth_time: -1,
    selling_price: 150,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 70,
    joja: 87,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  },
  {
    label: 'Artichoke',
    days_to_grow: 8,
    regrowth_time: -1,
    selling_price: 160,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 30,
    joja: Infinity,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  },
  {
    label: 'Beet',
    days_to_grow: 6,
    regrowth_time: -1,
    selling_price: 100,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: Infinity,
    joja: Infinity,
    egg_festival: Infinity,
    oasis: 20,
    travelling_cart: Infinity,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  },
  {
    label: 'Bok Choy',
    days_to_grow: 4,
    regrowth_time: -1,
    selling_price: 80,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 50,
    joja: 62,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  },
  {
    label: 'Fairy Rose',
    days_to_grow: 12,
    regrowth_time: -1,
    selling_price: 290,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 200,
    joja: 250,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  },
  {
    label: 'Pumpkin',
    days_to_grow: 13,
    regrowth_time: -1,
    selling_price: 320,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 100,
    joja: 125,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  },
  {
    label: 'Sweet Gem Berry',
    days_to_grow: 24,
    regrowth_time: -1,
    selling_price: 3000,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: Infinity,
    joja: Infinity,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: 1000,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  },
  {
    label: 'Yam',
    days_to_grow: 10,
    regrowth_time: -1,
    selling_price: 160,
    yield_per_harvest: 1,
    multiple_harvests: false,
    pierre: 60,
    joja: 75,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  },
  {
    label: 'Cranberries',
    days_to_grow: 7,
    regrowth_time: 5,
    selling_price: 75,
    yield_per_harvest: 2,
    multiple_harvests: true,
    pierre: 240,
    joja: 300,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  },
  {
    label: 'Eggplant',
    days_to_grow: 5,
    regrowth_time: 5,
    selling_price: 60,
    yield_per_harvest: 1,
    multiple_harvests: true,
    pierre: 20,
    joja: 25,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  },
  {
    label: 'Grape',
    days_to_grow: 10,
    regrowth_time: 3,
    selling_price: 80,
    yield_per_harvest: 1,
    multiple_harvests: true,
    pierre: 60,
    joja: 75,
    egg_festival: Infinity,
    oasis: Infinity,
    travelling_cart: Infinity,
    spring: false,
    summer: false,
    fall: true,
    winter: false
  }
]

function maxPossibleItem(produce, balance) {
  let max;
  for (const c of produce) {
    if (c.pierre > balance) {
      continue;
    } else {
      if (!max) {
        max = c
      } else {
        if (c.selling_price > max.selling_price) {
          mac = c
        }
      }
    }
  }
    return max;
}
const form = document.forms["best_farm"];
const outputTable = document.querySelector("table");
const outputTableBody = document.querySelector("tbody");
const rowTemplate = document.querySelector('#crop-row');


function clearChildNodes(element) {
  while (element.lastChild) {
    element.removeChild(element.lastChild);
  }
}
form.addEventListener('submit', function(e) {
  e.preventDefault();
  const balance = parseInt(form["balance"].value);
  const season = form["season"].value;
  const active_crops = Produce.filter((c) => c[season] === true & c.pierre !== Infinity);
  const field = {}
  let rem = balance;
  while (rem >= 0) {
    let biggest = maxPossibleItem(active_crops, rem);
    if (!biggest) break;
    if (field[biggest.label]) {
      field[biggest.label].count += 1;
      field[biggest.label].total = field[biggest.label].count * biggest.selling_price
    } else {
      field[biggest.label] = {
        count:1,
        value:biggest.selling_price,
        total:biggest.selling_price
      }
    }
    rem -= biggest.pierre;
  }
  clearChildNodes(outputTableBody);
  if (outputTable.classList.contains("dn")){
    outputTable.classList.remove("dn");
  }
  let total = 0
  for (const crop of Object.keys(field)) {
    const clone = document.importNode(rowTemplate.content, true);
    const cells = clone.querySelectorAll('td');
    cells[0].textContent = crop;
    cells[1].textContent = field[crop].count;
    cells[2].textContent = `${field[crop].value}g`;
    cells[3].textContent = `${field[crop].total}g`;
    outputTableBody.appendChild(clone);
    total += field[crop].total;
  }
  const clone = document.importNode(rowTemplate.content, true);
  const cells = clone.querySelectorAll('td');
  cells[0].textContent = "Total Value";
  cells[3].textContent = `${total}g`;
  outputTableBody.appendChild(clone);
})
